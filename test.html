<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Welcome to Webserv</title>
  <style>
    .container1 {
      width: 100%;
      position: absolute;
      top: 40%;
      text-align: center;
    }

    .container2 {
      width: 100%;
      position: absolute;
      top: 52%;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="container1">
    <h1>Welcome to our Webserv</h1>
  </div>
  <div class="container2">
    <button id="postButton">Add Post</button>
    <button id="deleteButton">Delete Post</button>
    <h1>File List</h1>
    <ul id="fileList"></ul>
    <script>
      function addPost() {
        var postText = document.getElementById("postText").value;
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4 && xhr.status == 200) {
            showFileList(); // 서버에서 파일 목록 업데이트
          }
        };
        xhr.open("POST", "script.cpp", true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.send("postText=" + encodeURIComponent(postText));
      }

      function deletePost() {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4 && xhr.status == 200) {
            showFileList(); // 서버에서 파일 목록 업데이트
          }
        };
        xhr.open("POST", "script.cpp", true);
        xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhr.send("deletePost=true");
      }

      function getFileContent(filename) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4 && xhr.status == 200) {
            // 서버에서 파일 내용을 받아 처리
            alert(xhr.responseText);
          }
        };
        xhr.open("GET", "script.cpp?filename=" + filename, true);
        xhr.send();
      }

      function showFileList() {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4 && xhr.status == 200) {
            document.getElementById("fileList").innerHTML = xhr.responseText;
          }
        };
        xhr.open("GET", "script.cpp", true);
        xhr.send();
      }

      // 초기 파일 목록 표시
      showFileList();
    </script>
  </div>
</body>

</html>
